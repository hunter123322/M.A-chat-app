<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Popup Menu</title>
    <style>
        :root {
          --primary-dark: rgb(102, 101, 101);
          --secondary-dark: rgb(85, 85, 85);
          --contact-bg: rgb(112, 79, 79);
          --message-bg: rgb(144, 144, 144);
          --my-message-bg: rgb(216, 216, 216);
          --hover-light: rgba(255, 255, 255, 0.1);
          --transition-speed: 0.3s;
        }

        body {
          background-color: white;
          font-family: "Segoe UI", Arial, sans-serif;
          display: flex;
          min-height: 100vh;
          line-height: 1.5;
          margin: 0;
          justify-content: center;
          align-items: center;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <script>
        // Create style element dynamically
        const style = document.createElement('style');
        style.textContent = `
            .menu-container {
                position: relative;
                width: 300px;
                background: var(--my-message-bg);
                padding: 20px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            }
            
            .menu-button {
                background: none;
                border: none;
                font-size: 26px;
                cursor: pointer;
                padding: 6px 12px;
                border-radius: 6px;
                color: var(--primary-dark);
                transition: all var(--transition-speed) ease;
                margin-left: auto;
                display: block;
            }
            
            .menu-button:hover {
                background-color: var(--hover-light);
                transform: scale(1.1);
            }
            
            .popup-menu {
                position: absolute;
                top: calc(100% + 8px);
                right: 0;
                background: white;
                border-radius: 8px;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
                padding: 6px 0;
                width: 160px;
                z-index: 100;
                opacity: 0;
                transform: translateY(-10px);
                visibility: hidden;
                flex-direction: column;
                border: 1px solid var(--message-bg);
                transition: all var(--transition-speed) ease;
            }
            
            .popup-menu.show {
                opacity: 1;
                transform: translateY(0);
                visibility: visible;
            }
            
            .menu-item {
                padding: 10px 16px;
                cursor: pointer;
                display: flex;
                align-items: center;
                gap: 12px;
                color: var(--primary-dark);
                transition: all var(--transition-speed) ease;
                font-size: 15px;
            }
            
            .menu-item:hover {
                background-color: var(--my-message-bg);
                padding-left: 20px;
            }
            
            .menu-item i {
                font-size: 16px;
                color: var(--secondary-dark);
                width: 20px;
                text-align: center;
                transition: transform var(--transition-speed) ease;
            }
            
            .menu-item:hover i {
                transform: scale(1.15);
            }
            
            .divider {
                height: 1px;
                background-color: var(--message-bg);
                margin: 4px 0;
                opacity: 0.3;
            }
            
            .danger {
                color: #e74c3c !important;
            }
            
            .danger i {
                color: #e74c3c !important;
            }
        `;
        document.head.appendChild(style);

        // Menu configuration
        const menuItems = [
            { icon: 'fa-edit', text: 'Edit', action: () => console.log('Edit clicked') },
            { icon: 'fa-copy', text: 'Copy', action: () => console.log('Copy clicked') },
            { type: 'divider' },
            { icon: 'fa-smile', text: 'React', action: () => console.log('React clicked') },
            { type: 'divider' },
            { icon: 'fa-trash', text: 'Delete', action: () => console.log('Delete clicked'), class: 'danger' }
        ];

        // Create container
        const container = document.createElement('div');
        container.className = 'menu-container';
        document.body.appendChild(container);

        // Create menu button
        const menuButton = document.createElement('button');
        menuButton.className = 'menu-button';
        menuButton.textContent = 'â‹®';
        container.appendChild(menuButton);

        // Create popup menu
        const popupMenu = document.createElement('div');
        popupMenu.className = 'popup-menu';
        container.appendChild(popupMenu);

        // Create menu items
        menuItems.forEach(item => {
            if (item.type === 'divider') {
                const divider = document.createElement('div');
                divider.className = 'divider';
                popupMenu.appendChild(divider);
            } else {
                const menuItem = document.createElement('div');
                menuItem.className = `menu-item ${item.class || ''}`;
                
                const icon = document.createElement('i');
                icon.className = `fas ${item.icon}`;
                menuItem.appendChild(icon);
                
                const text = document.createElement('span');
                text.textContent = item.text;
                menuItem.appendChild(text);
                
                menuItem.addEventListener('click', () => {
                    item.action();
                    popupMenu.classList.remove('show');
                    
                    // Visual feedback
                    menuItem.style.backgroundColor = 'rgba(0,0,0,0.1)';
                    setTimeout(() => {
                        menuItem.style.backgroundColor = '';
                    }, 300);
                });
                
                popupMenu.appendChild(menuItem);
            }
        });

        // Toggle menu visibility
        menuButton.addEventListener('click', (e) => {
            e.stopPropagation();
            popupMenu.classList.toggle('show');
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!popupMenu.contains(e.target) && e.target !== menuButton) {
                popupMenu.classList.remove('show');
            }
        });
    </script>
</body>
</html>